package n1exercici1;

//package casa package Backend.Sprint1.S1_02.n1exercici1;

import java.util.ArrayList;

public class Venda {

    private ArrayList<Producte> llistaProductes;
    private double preuTotal;



    public Venda() {

        llistaProductes = new ArrayList<Producte>();

    }



    //GETTERS SETTERS
    public ArrayList<Producte> getLlistaProductEs() {
        return llistaProductes;
    }



    public void setLlistaProductEs(ArrayList<Producte> llistaProductEs) {
        this.llistaProductes = llistaProductEs;
    }





    public double getPreuTotal() {
        return preuTotal;
    }




    public void setPreuTotal(double preuTotal) {
        this.preuTotal = preuTotal;
    }




    //METODES
    
    public int buscarProducte (String nom)throws ArrayIndexOutOfBoundsException{
                                                 
        
        int i = 0;
        int indexProducte = -1;
        boolean coincidencia = false;
               
        while(i<llistaProductes.size() && coincidencia == false){
            
            
             if (nom.equals(llistaProductes.get(i).getNom())) {
             
                indexProducte = i;
                coincidencia = true;   
                System.out.println("El producte existeix a la llista");
            }
            
            i++;       
        }  
        
        if (indexProducte == -1) {
            
            throw new ArrayIndexOutOfBoundsException("El producte no existeix");
            
        }
        
        
        return indexProducte;
    }

    
    public void afegirProductes(Producte producte) {
        
        
        llistaProductes.add(producte);

        
    }


    
    
    /*Metode on volem comprobar si es genera un error o no,
    dins de la condicio, en contes de imprimir un simple missatge, el que fem
    es crear un error del tipu que hem definit (amb el nom de la classe) i que 
    hereda de clase java Exception.
    important tambe despres dels parentesis del metode indicar-li que hi ha la posibilitat
    de que es produeixi un error (throws)
    */
    

    public double calcularTotal() throws VendaBuidaException {
        
        
        if(llistaProductes.size() == 0) {

            throw new VendaBuidaException("Per fer una venda primer has dâ€™afegir productes");

        } 

        
        for(int i = 0; i <llistaProductes.size(); i++) {

            preuTotal += llistaProductes.get(i).getPreu();	
        }  
     

    return preuTotal;

    }

}
